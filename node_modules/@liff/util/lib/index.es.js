import{logger as n}from"@liff/logger";import{__extends as t,__read as r,__makeTemplateObject as e}from"tslib";import{CREDENTIAL_KEYS as o,PERMANENT_LINK_ORIGIN as i}from"@liff/consts";function a(n){return window.atob(n.replace(/-/g,"+").replace(/_/g,"/"))}var c={decode:a,encode:function(n){return window.btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},decodeUnicode:function(n){var t=a(n).split("").map((function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)})).join("");return decodeURIComponent(t)}};function u(n,t){if(n===t)return 0;for(var r=n.split("."),e=t.split("."),o=Math.max(r.length,e.length),i=0;i<o;i++){r[i]||(r[i]="0"),e[i]||(e[i]="0");var a=parseInt(r[i])-parseInt(e[i]);if(0!==a)return a>0?1:-1}return 0}function f(t){var r=t.replace("#","").match(/.{2}/g)||[];if(4!==r.length)return n.warn("convertArgbToRgba: Received invalid ARGB color"),"";var e=function(n){var t=p(n);return Math.round(t/255*100)/100}(r[0]),o=p(r[1]),i=p(r[2]),a=p(r[3]);return"rgba(".concat(o,", ").concat(i,", ").concat(a,", ").concat(e,")")}function p(n){return parseInt(n,16)}function d(t){var r=t.replace("#","").match(/.{2}/g)||[];if(3!==r.length)return n.warn("convertArgbToRgba: Received invalid hex color"),"";var e=p(r[0]),o=p(r[1]),i=p(r[2]);return"".concat(e,", ").concat(o,", ").concat(i)}function s(n){for(var t=n.length,r=new ArrayBuffer(t),e=new Uint8Array(r),o=0;o<t;o++)e[o]=n.charCodeAt(o);return r}var l={get:function(n){var t=new RegExp("(?:(?:^|.*;\\s*)".concat(n,"\\s*\\=\\s*([^;]*).*$)|^.*$"));return document.cookie.replace(t,"$1")},set:function(t,r,e){var o=t+"="+r;if(e)for(var i in e){var a=e[i]?"=".concat(e[i]):"";o+="; ".concat(i).concat(a)}n.debug("set cookie",o),document.cookie=o},remove:function(n,t){var r="".concat(n,"=; expires=Thu, 01 Jan 1970 00:00:00 GMT");if(t)for(var e in t)r+="; ".concat(e,"=").concat(t[e]);document.cookie=r}},v=new Set(["400","401","403","404","429","500"]),g=function(n){function r(t,r){var e=n.call(this,r)||this;return e.code=t,e}return t(r,n),r}(Error);function h(n,t){return new g(n,t||"")}function m(n){var t=n.match(/([^-]+)-[^-]+/);return t&&t[1]}function w(n){var t="";return n.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").forEach((function(n){t+=String.fromCharCode(parseInt(n))})),window.btoa(t)}var y=function(){function n(){this.map={}}return n.prototype.clear=function(){this.map={}},n.prototype.getItem=function(n){var t=this.map[n];return void 0===t?null:t},n.prototype.setItem=function(n,t){this.map[n]=t},n.prototype.removeItem=function(n){delete this.map[n]},n.prototype.key=function(n){var t=Object.keys(this.map)[n];return void 0===t?null:t},Object.defineProperty(n.prototype,"length",{get:function(){return Object.keys(this.map).length},enumerable:!1,configurable:!0}),n}();var b={parse:function(n){return n.replace(/^\?/,"").replace(/^#\/?/,"").split(/&+/).filter((function(n){return n.length>0})).reduce((function(n,t){var e=r(t.split("=").map(decodeURIComponent),2),o=e[0],i=e[1],a=n[o];return Array.isArray(a)?a.push(i):Object.prototype.hasOwnProperty.call(n,o)?n[o]=[a,i]:n[o]=i,n}),{})},stringify:function(n){return Object.keys(n).map((function(t){var r=n[t],e=function(n){return void 0!==n?"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n)):encodeURIComponent(t)};return Array.isArray(r)?r.map((function(n){return e(n)})).join("&"):e(r)})).join("&")}},A="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function R(){return window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967296}function I(n){for(var t="",r=0;r<n;r++)t+=A[Math.floor(R()*A.length)];return t}function U(n){var t=new URL(n),r=t.hash.slice(1).split("&").filter((function(n){return!o.some((function(t){return n.includes("".concat(t,"="))}))})).join("&");return t.hash=r,t.toString()}function C(n){var t=new URL(n);return t.toString().replace(new RegExp(String.raw(j||(j=e(["^",""],["^",""])),t.origin)),"")}var j,x=function(n){var t=C(U(n));window.history.replaceState(history.state,"",t)};function L(n,t){if(!n)throw new Error("addParamsToUrl: invalid URL");var e=new URL(n);return Object.entries(t).forEach((function(n){var t=r(n,2),o=t[0],i=t[1];e.searchParams.set(o,i)})),e.toString()}function O(n){var t,r=n.match((t=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),new RegExp("^".concat(t,"(\\d+-\\w+)"))));return r&&r[1]}function S(n){var t=n.match(/^(https?:\/\/.*?)\//);return t&&t[1]||""}function k(n){void 0===n&&(n=window.navigator.userAgent);var t=n.toLowerCase();return-1!==t.indexOf("msie")||-1!==t.indexOf("trident")}function E(n){return void 0===n&&(n=window.navigator.userAgent),/ipad/.test(n.toLowerCase())}function $(n){return void 0===n&&(n=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+/.test(n)}function F(n){return void 0===n&&(n=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+ LIFF/.test(n)}function T(n){return void 0===n&&(n=window.navigator.userAgent),/LIFF\/SubWindow/.test(n)}var M=function(){return"undefined"==typeof window};export{v as HTTPStatusCodes,y as InMemoryStorage,g as LiffError,L as addParamsToUrl,c as base64Url,u as compareVersion,f as convertArgbToRgba,s as convertArrayBuffer,d as convertHexToRgb,l as cookie,h as createLiffError,m as extractChannelIdFromLiffId,O as extractLiffId,S as getOriginOfUrl,R as getRandomValue,w as hexToBase64,k as isIE,E as isIpad,F as isLIFFBrowser,$ as isLINEBrowser,M as isNonBrowserEnvironment,T as isSubWindow,b as qs,I as randomAlphaNumericString,U as removeCredential,C as removeOrigin,x as replaceUrlCredentialRemoved};
